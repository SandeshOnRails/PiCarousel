var connect = require('connect');
var http = require('http');
var app = connect();
var project = require('./lib/project.js');
var config = require('./lib/config.js');
var path = require('path');
var debug = require('debug')('clam:index');
var template = require('./lib/template.js');
var mod = require('./lib/mod.js');
var page = require('./lib/page.js');
var widget = require('./lib/widget.js');

var clam = module.exports = {
    init: function(){
        config.init();
        template.init();
        var ret = project({});

        ret.data.forEach(function (ac) {
            debug(ac.action, ac.content);
        });
        process.exit(0);
    },
    on: function(){
        var prjInfo = config.get('project');
        if (!prjInfo) {
            console.log('Execute "clam init".');
            return;
        }
        var startServer = require('./lib/server.js');
        startServer(false);
    },
    build: function(timestamp){
        var build = require('./lib/build.js');
        build.build('server', timestamp);
    }
}
// clam.on();